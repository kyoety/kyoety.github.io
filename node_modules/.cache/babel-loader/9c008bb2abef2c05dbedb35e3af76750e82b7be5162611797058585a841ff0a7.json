{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from 'axios';\nconst clientId = \"5748d98c53d240e1a5f79b1af1d69ef1\"; // Replace with your client ID\nconst params = new URLSearchParams(window.location.search);\nconst code = params.get(\"code\");\nif (!code) {\n  redirectToAuthCodeFlow(clientId);\n} else {\n  const accessToken = await getAccessToken(clientId, code);\n  const profile = await fetchProfile(accessToken);\n  populateUI(profile);\n}\nif (!code) {\n  redirectToAuthCodeFlow(clientId);\n} else {\n  const profile = await fetchProfile(token);\n  console.log(profile); // Profile data logs to console\n  populateUI(profile);\n}\nexport async function redirectToAuthCodeFlow(clientId) {\n  const verifier = generateCodeVerifier(128);\n  const challenge = await generateCodeChallenge(verifier);\n  localStorage.setItem(\"verifier\", verifier);\n  const params = new URLSearchParams();\n  params.append(\"client_id\", clientId);\n  params.append(\"response_type\", \"code\");\n  params.append(\"redirect_uri\", \"http://localhost:5173/callback\");\n  params.append(\"scope\", \"user-read-private user-read-email\");\n  params.append(\"code_challenge_method\", \"S256\");\n  params.append(\"code_challenge\", challenge);\n  document.location = `https://accounts.spotify.com/authorize?${params.toString()}`;\n}\nfunction generateCodeVerifier(length) {\n  let text = '';\n  let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < length; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n}\nasync function generateCodeChallenge(codeVerifier) {\n  const data = new TextEncoder().encode(codeVerifier);\n  const digest = await window.crypto.subtle.digest('SHA-256', data);\n  return btoa(String.fromCharCode.apply(null, [...new Uint8Array(digest)])).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\nexport async function getAccessToken(clientId, code) {\n  const verifier = localStorage.getItem(\"verifier\");\n  const params = new URLSearchParams();\n  params.append(\"client_id\", clientId);\n  params.append(\"grant_type\", \"authorization_code\");\n  params.append(\"code\", code);\n  params.append(\"redirect_uri\", \"http://localhost:5173/callback\");\n  params.append(\"code_verifier\", verifier);\n  const result = await fetch(\"https://accounts.spotify.com/api/token\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    body: params\n  });\n  const {\n    access_token\n  } = await result.json();\n  return access_token;\n}\nasync function fetchProfile(token) {\n  const result = await fetch(\"https://api.spotify.com/v1/me\", {\n    method: \"GET\",\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  return await result.json();\n}\nexport const getRecentlyPlayed = () => {\n  axios.get('https://api.spotify.com/v1/me/player/recently-played', {\n    headers\n  });\n};\nexport const RecentlyPlayed = () => {\n  _s();\n  const [recentlyPlayed, setRecentlyPlayed] = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      const {\n        data\n      } = await getRecentlyPlayed();\n      setRecentlyPlayed(data);\n    };\n    catchErrors(fetchData());\n  }, []);\n};\n_s(RecentlyPlayed, \"Rz2RpwdZj/rhgYJ+3uwUhSM6xZk=\");\n_c = RecentlyPlayed;\nfunction populateUI(profile) {\n  document.getElementById(\"displayName\").innerText = profile.display_name;\n  if (profile.images[0]) {\n    const profileImage = new Image(200, 200);\n    profileImage.src = profile.images[0].url;\n    document.getElementById(\"avatar\").appendChild(profileImage);\n    document.getElementById(\"imgUrl\").innerText = profile.images[0].url;\n  }\n  document.getElementById(\"id\").innerText = profile.id;\n  document.getElementById(\"email\").innerText = profile.email;\n  document.getElementById(\"uri\").innerText = profile.uri;\n  document.getElementById(\"uri\").setAttribute(\"href\", profile.external_urls.spotify);\n  document.getElementById(\"url\").innerText = profile.href;\n  document.getElementById(\"url\").setAttribute(\"href\", profile.href);\n}\nvar _c;\n$RefreshReg$(_c, \"RecentlyPlayed\");","map":{"version":3,"names":["axios","clientId","params","URLSearchParams","window","location","search","code","get","redirectToAuthCodeFlow","accessToken","getAccessToken","profile","fetchProfile","populateUI","token","console","log","verifier","generateCodeVerifier","challenge","generateCodeChallenge","localStorage","setItem","append","document","toString","length","text","possible","i","charAt","Math","floor","random","codeVerifier","data","TextEncoder","encode","digest","crypto","subtle","btoa","String","fromCharCode","apply","Uint8Array","replace","getItem","result","fetch","method","headers","body","access_token","json","Authorization","getRecentlyPlayed","RecentlyPlayed","_s","recentlyPlayed","setRecentlyPlayed","useState","useEffect","fetchData","catchErrors","_c","getElementById","innerText","display_name","images","profileImage","Image","src","url","appendChild","id","email","uri","setAttribute","external_urls","spotify","href","$RefreshReg$"],"sources":["/Users/katieye/Desktop/my_portfolio/portfolio/src/spotify/src/script.js"],"sourcesContent":["import axios from 'axios';\n\nconst clientId = \"5748d98c53d240e1a5f79b1af1d69ef1\"; // Replace with your client ID\nconst params = new URLSearchParams(window.location.search);\nconst code = params.get(\"code\");\n\nif (!code) {\n    redirectToAuthCodeFlow(clientId);\n} else {\n    const accessToken = await getAccessToken(clientId, code);\n    const profile = await fetchProfile(accessToken);\n    populateUI(profile);\n}\n\nif (!code) {\n    redirectToAuthCodeFlow(clientId);\n} else {\n    const profile = await fetchProfile(token);\n    console.log(profile); // Profile data logs to console\n    populateUI(profile);\n}\n\nexport async function redirectToAuthCodeFlow(clientId) {\n    const verifier = generateCodeVerifier(128);\n    const challenge = await generateCodeChallenge(verifier);\n\n    localStorage.setItem(\"verifier\", verifier);\n\n    const params = new URLSearchParams();\n    params.append(\"client_id\", clientId);\n    params.append(\"response_type\", \"code\");\n    params.append(\"redirect_uri\", \"http://localhost:5173/callback\");\n    params.append(\"scope\", \"user-read-private user-read-email\");\n    params.append(\"code_challenge_method\", \"S256\");\n    params.append(\"code_challenge\", challenge);\n\n    document.location = `https://accounts.spotify.com/authorize?${params.toString()}`;\n}\n\nfunction generateCodeVerifier(length) {\n    let text = '';\n    let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (let i = 0; i < length; i++) {\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n}\n\nasync function generateCodeChallenge(codeVerifier) {\n    const data = new TextEncoder().encode(codeVerifier);\n    const digest = await window.crypto.subtle.digest('SHA-256', data);\n    return btoa(String.fromCharCode.apply(null, [...new Uint8Array(digest)]))\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/=+$/, '');\n}\n\nexport async function getAccessToken(clientId, code) {\n    const verifier = localStorage.getItem(\"verifier\");\n\n    const params = new URLSearchParams();\n    params.append(\"client_id\", clientId);\n    params.append(\"grant_type\", \"authorization_code\");\n    params.append(\"code\", code);\n    params.append(\"redirect_uri\", \"http://localhost:5173/callback\");\n    params.append(\"code_verifier\", verifier);\n\n    const result = await fetch(\"https://accounts.spotify.com/api/token\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: params\n    });\n\n    const { access_token } = await result.json();\n    return access_token;\n}\n\nasync function fetchProfile(token) {\n    const result = await fetch(\"https://api.spotify.com/v1/me\", {\n        method: \"GET\", headers: { Authorization: `Bearer ${token}` }\n    });\n\n    return await result.json();\n}\n\nexport const getRecentlyPlayed = () => {\n    axios.get('https://api.spotify.com/v1/me/player/recently-played', { headers });\n}\n\nexport const RecentlyPlayed = () => {\n    const [recentlyPlayed, setRecentlyPlayed] = useState(null);\n  \n    useEffect(() => {\n      const fetchData = async () => {\n        const { data } = await getRecentlyPlayed();\n        setRecentlyPlayed(data);\n      };\n      catchErrors(fetchData());\n    }, []);\n};  \n\nfunction populateUI(profile) {\n    document.getElementById(\"displayName\").innerText = profile.display_name;\n    if (profile.images[0]) {\n        const profileImage = new Image(200, 200);\n        profileImage.src = profile.images[0].url;\n        document.getElementById(\"avatar\").appendChild(profileImage);\n        document.getElementById(\"imgUrl\").innerText = profile.images[0].url;\n    }\n    document.getElementById(\"id\").innerText = profile.id;\n    document.getElementById(\"email\").innerText = profile.email;\n    document.getElementById(\"uri\").innerText = profile.uri;\n    document.getElementById(\"uri\").setAttribute(\"href\", profile.external_urls.spotify);\n    document.getElementById(\"url\").innerText = profile.href;\n    document.getElementById(\"url\").setAttribute(\"href\", profile.href);\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}